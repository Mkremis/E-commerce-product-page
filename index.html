<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- displays site properly based on user's device -->

    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="./images/favicon-32x32.png"
    />
    <link rel="stylesheet" href="./css/style.css" />

    <title>Frontend Mentor | E-commerce product page</title>

    <!-- Feel free to remove these styles or customise in your own stylesheet 👍 -->
    <style>
      .attribution {
        font-size: 16px;
        text-align: center;
      }
      .attribution a {
        color: hsl(228, 45%, 44%);
      }
    </style>
  </head>
  <body>
    <main class="main-container">
      <header class="header">
        <div class="header__navigation">
          <img
            class="header__menu"
            src="./images/icon-menu.svg"
            alt="menu icon"
          />

          <img class="header__logo" src="./images/logo.svg" alt="logo" />

          <!-- navbar desktop-->
          <nav class="nav-bar">
            <ul class="navbar__items">
              <li><a class="navbar__link" href="#">Collections</a></li>
              <li><a class="navbar__link" href="#">Men</a></li>
              <li><a class="navbar__link" href="#">Women</a></li>
              <li><a class="navbar__link" href="#">About</a></li>
              <li><a class="navbar__link" href="#">Contact</a></li>
            </ul>
          </nav>
        </div>
        <!-- inicio modal navbar -->
        <div class="modal-navbar__background --invisible">
          <nav class="modal-navbar">
            <img
              class="modal-navbar__close"
              src="./images/icon-close.svg"
              alt="close"
            />
            <ul class="modal-navbar__items">
              <li><a class="modal-navbar__link" href="#">Collections</a></li>
              <li><a class="modal-navbar__link" href="#">Men</a></li>
              <li><a class="modal-navbar__link" href="#">Women</a></li>
              <li><a class="modal-navbar__link" href="#">About</a></li>
              <li><a class="modal-navbar__link" href="#">Contact</a></li>
            </ul>
          </nav>
        </div>
        <!-- final modal navbar -->
        <div class="header__cart-avatar">
          <div class="header__cart">
            <div class="header__cart--notification"></div>
            <img class="header__cart-img" src="./images/icon-cart.svg" alt="" />
          </div>

          <img class="header__avatar" src="./images/image-avatar.png" alt="" />
        </div>
      </header>
      <section class="content">
        <article class="gallery">
          <div class="gallery__image-container">
            <img
              class="gallery__previous"
              src="./images/icon-previous.svg"
              alt="previous"
            />
            <img
              class="gallery__next"
              src="./images/icon-next.svg"
              alt="next"
            />
          </div>
          <div class="gallery__thumnails">
            <img
              id="1"
              class="gallery__thumnail"
              src="./images/image-product-1-thumbnail.jpg"
              alt="thumnail"
            />
            <img
              id="2"
              class="gallery__thumnail"
              src="./images/image-product-2-thumbnail.jpg"
              alt="thumnail"
            />
            <img
              id="3"
              class="gallery__thumnail"
              src="./images/image-product-3-thumbnail.jpg"
              alt="thumnail"
            />
            <img
              id="4"
              class="gallery__thumnail"
              src="./images/image-product-4-thumbnail.jpg"
              alt="thumnail"
            />
          </div>
        </article>
        <article class="details">
          <h2 class="details__company">Sneaker Company</h2>
          <h2 class="details__title">Fall Limited Edition Sneakers</h2>
          <p class="details__description">
            These low-profile sneakers are your perfect casual wear companion.
            Featuring a durable rubber outer sole, they’ll withstand everything
            the weather can offer.
          </p>
          <div class="details__prices">
            <div class="details__now">
              <p class="price_now">$125.00</p>
              <p class="details__discount">50%</p>
            </div>
            <p class="details__before">$250.00</p>
          </div>
          <div class="details__product-quantity">
            <div class="input">
              <img
                class="input__minus"
                src="./images/icon-minus.svg"
                alt="minus"
              />
              <input class="input__number" type="text" value="0" />
              <img
                class="input__plus"
                src="./images/icon-plus.svg"
                alt="plus"
              />
            </div>
            <button class="details__button">
              <img src="./images/icon-cart-white.svg" alt="cart" />Add to cart
            </button>
          </div>
        </article>
      </section>
      <!-- inicio cart modal -->
      <div class="cart-modal --invisible">
        <p class="cart-modal__title">Cart</p>
        <div class="cart-modal__checkout-container">
          <div class="cart-modal__empty --invisible">
            <p>Your cart is empty</p>
          </div>
          <div class="cart-modal__details-container">
            <div>
              <img
                class="cart-modal__image"
                src="./images/image-product-1-thumbnail.jpg"
                alt="product"
              />
            </div>
            <div>
              <p class="cart-modal__product">Autum Limited Edition...</p>
              <p class="cart-modal__price"></p>
              <p class="cart-modal__total-price"></p>
            </div>
            <div>
              <img
                class="cart-modal__delete"
                src="./images/icon-delete.svg"
                alt="delete"
              />
            </div>
          </div>
          <button class="cart-modal__checkout">Checkout</button>
        </div>
      </div>
      <!-- final cart modal -->
      <!-- inicio gallery modal -->
      <div class="modal-gallery__background">
        <article class="modal-gallery">
          <div class="modal-gallery__close-container">
            <img
              class="modal-gallery__close"
              src="./images/icon-close.svg"
              alt="icon close"
            />
          </div>
          <div class="modal-gallery__image-container">
            <img
              class="modal-gallery__previous"
              src="./images/icon-previous.svg"
              alt="previous"
            />
            <img
              class="modal-gallery__next"
              src="./images/icon-next.svg"
              alt="next"
            />
          </div>
          <div class="modal-gallery__thumnails">
            <img
              id="m1"
              class="modal-gallery__thumnail"
              src="./images/image-product-1-thumbnail.jpg"
              alt="thumnail"
            />
            <img
              id="m2"
              class="modal-gallery__thumnail"
              src="./images/image-product-2-thumbnail.jpg"
              alt="thumnail"
            />
            <img
              id="m3"
              class="modal-gallery__thumnail"
              src="./images/image-product-3-thumbnail.jpg"
              alt="thumnail"
            />
            <img
              id="m4"
              class="modal-gallery__thumnail"
              src="./images/image-product-4-thumbnail.jpg"
              alt="thumnail"
            />
          </div>
        </article>
      </div>
      <!-- final gallery modal -->
    </main>
    <footer class="attribution">
      Challenge by
      <a href="https://www.frontendmentor.io?ref=challenge" target="_blank"
        >Frontend Mentor</a
      >. Coded by
      <a href="https://www.linkedin.com/in/martinkremis/" target="_blank"
        >Martin Kremis</a
      >.
    </footer>
    <script>
      const $HeaderCartNot = document.querySelector(
          ".header__cart--notification"
        ),
        $Input = document.querySelector(".input__number"),
        $CartModal_cont = document.querySelector(
          ".cart-modal__details-container"
        ),
        $CartModal_empty = document.querySelector(".cart-modal__empty"),
        $CartModal_checkout = document.querySelector(".cart-modal__checkout"),
        $DskModalGallery = document.querySelector(".modal-gallery__background"),
        $DskModalGallery_Container = document.querySelector(
          ".modal-gallery__image-container"
        ),
        $Mobile_GalleryContainer = document.querySelector(
          ".gallery__image-container"
        ),
        $ModalBck = document.querySelector(".modal-navbar__background");

      const ALL_EVENTS = {
        input__plus: {
          action: (classTarget) => {
            let newValue = parseInt($Input.value) + 1;
            $Input.value = newValue;
          },
        },
        input__minus: {
          action: (classTarget) => {
            let newValue = parseInt($Input.value) - 1;
            $Input.value = newValue < 0 ? 0 : newValue;
          },
        },
        details__button: {
          action: (classTarget, eTarget) => {
            $HeaderCartNot.style.display = "block";
            if ($Input.value > 0) {
              $HeaderCartNot.textContent = $Input.value;
              localStorage.setItem("cart", $Input.value);
            } else {
              $HeaderCartNot.textContent = "0";
              $HeaderCartNot.style.display = "none";
              localStorage.removeItem("cart");
            }
          },
        },
        "header__cart-img": {
          action: (classTarget, eTarget) => {
            const $modalCart = document.querySelector(".cart-modal"),
              $modalPrice = document.querySelector(".cart-modal__price"),
              $totalPrice = document.querySelector(".cart-modal__total-price"),
              $priceNow = document.querySelector(".price_now");
            let price = parseInt($priceNow.textContent.replace("$", "")),
              quantity = parseInt(localStorage.getItem("cart")),
              totalPrice = price * quantity;
            $modalCart.classList.toggle("--invisible");
            if (quantity > 0) {
              $modalPrice.textContent = `${$priceNow.textContent} x ${quantity}`;
              $totalPrice.textContent = `$${totalPrice}`;
            } else {
              document
                .querySelector(".cart-modal__details-container")
                .classList.toggle("--invisible");
              $CartModal_empty.classList.toggle("--invisible");
              $CartModal_checkout.classList.toggle("--invisible");
            }
          },
        },

        "cart-modal__delete": {
          action: (classTarget, eTarget) => {
            localStorage.setItem("cart", "0");
            $HeaderCartNot.textContent = "0";
            $HeaderCartNot.style.display = "none";
            $Input.value = "0";
            $CartModal_cont.classList.toggle("--invisible");
            $CartModal_empty.classList.toggle("--invisible");
            $CartModal_checkout.classList.toggle("--invisible");
          },
        },
      };
      const DSK_EVENTS = {
        "gallery__image-container": {
          action: (e) => {
            $DskModalGallery.style.display = "flex";
          },
        },
        "modal-gallery__close": {
          action: (e) => {
            $DskModalGallery.style.display = "none";
          },
        },
        "modal-gallery__next": {
          gallery: [
            "image-product-1.jpg",
            "image-product-2.jpg",
            "image-product-3.jpg",
            "image-product-4.jpg",
          ],
          action: (classTarget) => {
            const { gallery } = DSK_EVENTS[classTarget];
            const $DskModalGalleryContainer = document.querySelector(
              ".modal-gallery__image-container"
            );
            let bckImg = getComputedStyle(
                $DskModalGalleryContainer
              ).backgroundImage,
              currentImg = gallery.filter((img) => bckImg.includes(img)),
              nextIndex = gallery.indexOf(currentImg[0]) + 1,
              nextImg =
                nextIndex === gallery.length ? gallery[0] : gallery[nextIndex];
            $DskModalGallery_Container.style.backgroundImage = `url('./images/${nextImg}')`;
          },
        },
        "modal-gallery__previous": {
          gallery: [
            "image-product-1.jpg",
            "image-product-2.jpg",
            "image-product-3.jpg",
            "image-product-4.jpg",
          ],
          action: (classTarget) => {
            const { gallery } = DSK_EVENTS[classTarget];
            const $DskModalGalleryContainer = document.querySelector(
              ".modal-gallery__image-container"
            );
            let bckImg = getComputedStyle(
                $DskModalGalleryContainer
              ).backgroundImage,
              currentImg = gallery.filter((img) => bckImg.includes(img)),
              prevIndex = gallery.indexOf(currentImg[0]) - 1,
              prevImg =
                prevIndex < 0
                  ? gallery[gallery.length - 1]
                  : gallery[prevIndex];
            $DskModalGallery_Container.style.backgroundImage = `url('./images/${prevImg}')`;
          },
        },
        "modal-gallery__thumnail": {
          gallery: [
            "image-product-1.jpg",
            "image-product-2.jpg",
            "image-product-3.jpg",
            "image-product-4.jpg",
          ],
          action: (classTarget, eTarget) => {
            const { gallery } = DSK_EVENTS[classTarget];
            let index = eTarget.id.replace("m", "") - 1;
            $DskModalGallery_Container.style.backgroundImage = `url('./images/${gallery[index]}')`;
          },
        },
        gallery__thumnail: {
          gallery: [
            "image-product-1.jpg",
            "image-product-2.jpg",
            "image-product-3.jpg",
            "image-product-4.jpg",
          ],
          action: (classTarget, eTarget) => {
            const { gallery } = DSK_EVENTS[classTarget],
              $DskGallery_Container = document.querySelector(
                ".gallery__image-container"
              );
            let index = eTarget.id - 1;
            $DskGallery_Container.style.backgroundImage = `url('./images/${gallery[index]}')`;
          },
        },
      };
      const MOBILE_EVENTS = {
        gallery__next: {
          gallery: [
            "image-product-1.jpg",
            "image-product-2.jpg",
            "image-product-3.jpg",
            "image-product-4.jpg",
          ],
          action: (classTarget) => {
            const { gallery } = MOBILE_EVENTS[classTarget];
            let bckImg = getComputedStyle(
                $Mobile_GalleryContainer
              ).backgroundImage,
              currentImg = gallery.filter((img) => bckImg.includes(img)),
              nextIndex = gallery.indexOf(currentImg[0]) + 1,
              nextImg =
                nextIndex === gallery.length ? gallery[0] : gallery[nextIndex];
            $Mobile_GalleryContainer.style.backgroundImage = `url('./images/${nextImg}')`;
          },
        },
        gallery__previous: {
          gallery: [
            "image-product-1.jpg",
            "image-product-2.jpg",
            "image-product-3.jpg",
            "image-product-4.jpg",
          ],
          action: (classTarget) => {
            const { gallery } = MOBILE_EVENTS[classTarget];
            let bckImg = getComputedStyle(
                $Mobile_GalleryContainer
              ).backgroundImage,
              currentImg = gallery.filter((img) => bckImg.includes(img)),
              prevIndex = gallery.indexOf(currentImg[0]) - 1,
              prevImg =
                prevIndex < 0
                  ? gallery[gallery.length - 1]
                  : gallery[prevIndex];
            $Mobile_GalleryContainer.style.backgroundImage = `url('./images/${prevImg}')`;
          },
        },
        header__menu: {
          action: (classTarget) => {
            $ModalBck.classList.toggle("--invisible");
          },
        },
        "modal-navbar__close": {
          action: (classTarget) => {
            $ModalBck.classList.toggle("--invisible");
          },
        },
      };
      document.addEventListener("click", (e) => {
        e.preventDefault();
        const CLASS_TARGET = e.target.classList[0];
        let dskSearch = Object.keys(DSK_EVENTS).find(
            (selector) => selector === CLASS_TARGET
          ),
          allSearch = Object.keys(ALL_EVENTS).find(
            (selector) => selector === CLASS_TARGET
          ),
          mobileSearch = Object.keys(MOBILE_EVENTS).find(
            (selector) => selector === CLASS_TARGET
          );
        if (dskSearch) {
          DSK_EVENTS[CLASS_TARGET].action(CLASS_TARGET, e.target);
        } else if (allSearch) {
          ALL_EVENTS[CLASS_TARGET].action(CLASS_TARGET, e.target);
        } else if (mobileSearch) {
          MOBILE_EVENTS[CLASS_TARGET].action(CLASS_TARGET, e.target);
        } else {
          return;
        }
      });
    </script>
  </body>
</html>
